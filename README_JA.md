# STS 3.0

Rustで再構築されたタイムシートエディタ

## 機能

- **高速・軽量**：最適化された実行ファイルは約3MB、メモリ使用量も最小限
- **ネイティブSTSフォーマット**：`.sts`ファイルの読み書きを完全サポート、Shift-JISエンコーディング対応
- **テーマ設定**：ライト/ダークテーマの切り替え
- **AEキーフレーム書き出し**：キーフレームデータをクリップボードにコピーし、After Effectsに貼り付け可能
- **柔軟な入力方式**：Enterキーのコマ打ち数を設定可能、スキップしたセルを自動補間

## 使い方

### 新規タイムシートの作成

1. **ファイル → 新規作成** をクリック、または **Ctrl+N** を押す
2. パラメータを設定：
   - **名前**：タイムシート名
   - **レイヤー数**：レイヤーの数（1-1000）
   - **フレームレート**：FPS（24または30）
   - **ページあたりのフレーム数**：1ページに表示するフレーム数（12-288）
   - **尺**：総尺、秒+フレーム形式（例：6s + 0k）
3. **OK** をクリックして作成

### セルの編集

- セルを**クリック**して編集開始
- 数字を**入力**して**Enter**で下に移動
- 編集中は**矢印キー**でナビゲーション
- **空入力** + **Enter**で上のセルの値をコピー
- **Esc**で編集をキャンセル

### 選択とクリップボード

- **ドラッグ**で複数セルを選択
- **右クリック**でコンテキストメニューを開く
- 選択範囲を**コピー/カット/ペースト**
- システムクリップボード対応（Excel互換のTSV形式）

## ファイル形式

ShiraheiTimeSheetバイナリ形式

対応：
- 最大**255レイヤー**
- 最大**65535フレーム**

## ビルド

```bash
# デバッグ
cargo build

# リリース
cargo build --release
```

リリース版の実行ファイルは `target/release/sts.exe` に生成されます。

## 依存関係

- **egui** 0.29 - GUIフレームワーク
- **eframe** 0.29 - ネイティブウィンドウラッパー
- **encoding_rs** - Shift-JISエンコード/デコード
- **rfd** - ネイティブファイルダイアログ
- **anyhow** - エラーハンドリング

## システム要件

- **Windows**: Windows 7以降
- **macOS**: macOS 10.13以降
- **Linux**: モダンなLinuxディストリビューション（X11またはWayland必須）

## ライセンス
Apache-2.0

### エンコーディング処理

`encoding_rs`ライブラリを使用してShift-JISエンコーディングを処理：
- 読み込み時に自動的にUTF-8にデコード
- 保存時にShift-JISに変換
- 日本語レイヤー名に対応

## 開発ロードマップ

### 完了 ✅
- [x] 基本的なテーブル編集
- [x] STSファイルの読み書き
- [x] 元に戻す/やり直し
- [x] クリップボード操作
- [x] キーボードナビゲーション


## コントリビューション

IssueやPull Requestを歓迎します！

### 開発環境のセットアップ

```bash
# リポジトリをクローン
git clone https://github.com/ChenxingM/sts-rust.git
cd sts-rust

# Rustをインストール
curl --proto '=https' --tlsv1.2 -sSf https://sh.rustup.rs | sh

# テストを実行
cargo test

# 開発版を起動
cargo run
```

### コードスタイル

- `rustfmt`でコードをフォーマット
- `clippy`でコード品質をチェック
- 重要な機能にはテストを作成

```bash
cargo fmt
cargo clippy
cargo test
```


## 謝辞

- オリジナルのShiraheiTimeSheet作者
- egui GUIフレームワーク

## お問い合わせ

ご質問やご提案は、IssueまたはPull Requestをお送りください。

---
